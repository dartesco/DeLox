import Scanner from './scanner.ts';
let hadError = false;
async function main(args) {
    if (args.length > 1) {
        console.warn("Usage: delox [script]");
        return;
    }
    else if (args.length == 1) {
        runFile(args[0]);
    }
    else {
        runPrompt();
    }
}
async function runFile(path) {
    const fileText = await Deno.readTextFile(path);
    run(fileText);
}
function runPrompt() {
    while (true) {
        const line = prompt("> ");
        if (!line || line.length < 1)
            break;
        run(line);
        hadError = false;
    }
}
function run(source) {
    const scanner = new Scanner(source);
    const tokens = scanner.scanTokens();
    for (let token in tokens) {
        console.log(token);
    }
}
export function error(line, message) {
    report(line, "", message);
}
function report(line, where, message) {
    console.error(`[Line ${line}] Error${where}: ${message}`);
    hadError = true;
}
main(Deno.args);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZmlsZTovLy9ob21lL3J1bm5lci9EZUxveC9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLE9BQU8sTUFBTSxjQUFjLENBQUM7QUFFbkMsSUFBSSxRQUFRLEdBQUcsS0FBSyxDQUFDO0FBRXJCLEtBQUssVUFBVSxJQUFJLENBQUMsSUFBYztJQUNoQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQ25CLE9BQU8sQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUN0QyxPQUFPO0tBQ1I7U0FBTSxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO1FBQzNCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNsQjtTQUFNO1FBQ0wsU0FBUyxFQUFFLENBQUM7S0FDYjtBQUNILENBQUM7QUFFRCxLQUFLLFVBQVUsT0FBTyxDQUFDLElBQVk7SUFDakMsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQy9DLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNoQixDQUFDO0FBRUQsU0FBUyxTQUFTO0lBQ2hCLE9BQU8sSUFBSSxFQUFFO1FBQ1gsTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFCLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQUUsTUFBTTtRQUNwQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDVixRQUFRLEdBQUcsS0FBSyxDQUFDO0tBQ2xCO0FBQ0gsQ0FBQztBQUVELFNBQVMsR0FBRyxDQUFDLE1BQWM7SUFDekIsTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEMsTUFBTSxNQUFNLEdBQVksT0FBTyxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBRTdDLEtBQUssSUFBSSxLQUFLLElBQUksTUFBTSxFQUFFO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDcEI7QUFDSCxDQUFDO0FBRUQsTUFBTSxVQUFVLEtBQUssQ0FBQyxJQUFZLEVBQUUsT0FBZTtJQUNqRCxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM1QixDQUFDO0FBRUQsU0FBUyxNQUFNLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxPQUFlO0lBQzFELE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxJQUFJLFVBQVUsS0FBSyxLQUFLLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDMUQsUUFBUSxHQUFHLElBQUksQ0FBQztBQUNsQixDQUFDO0FBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUb2tlbiBmcm9tICcuL3Rva2VuLnRzJztcbmltcG9ydCBTY2FubmVyIGZyb20gJy4vc2Nhbm5lci50cyc7XG5cbmxldCBoYWRFcnJvciA9IGZhbHNlO1xuXG5hc3luYyBmdW5jdGlvbiBtYWluKGFyZ3M6IHN0cmluZ1tdKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICBjb25zb2xlLndhcm4oXCJVc2FnZTogZGVsb3ggW3NjcmlwdF1cIik7XG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09IDEpIHtcbiAgICBydW5GaWxlKGFyZ3NbMF0pO1xuICB9IGVsc2Uge1xuICAgIHJ1blByb21wdCgpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bkZpbGUocGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IGZpbGVUZXh0ID0gYXdhaXQgRGVuby5yZWFkVGV4dEZpbGUocGF0aCk7XG4gIHJ1bihmaWxlVGV4dCk7XG59XG5cbmZ1bmN0aW9uIHJ1blByb21wdCgpIHtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCBsaW5lID0gcHJvbXB0KFwiPiBcIik7XG4gICAgaWYgKCFsaW5lIHx8IGxpbmUubGVuZ3RoIDwgMSkgYnJlYWs7XG4gICAgcnVuKGxpbmUpO1xuICAgIGhhZEVycm9yID0gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gcnVuKHNvdXJjZTogc3RyaW5nKSB7XG4gIGNvbnN0IHNjYW5uZXIgPSBuZXcgU2Nhbm5lcihzb3VyY2UpO1xuICBjb25zdCB0b2tlbnM6IFRva2VuW10gPSBzY2FubmVyLnNjYW5Ub2tlbnMoKTtcblxuICBmb3IgKGxldCB0b2tlbiBpbiB0b2tlbnMpIHtcbiAgICBjb25zb2xlLmxvZyh0b2tlbik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKGxpbmU6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKSB7XG4gIHJlcG9ydChsaW5lLCBcIlwiLCBtZXNzYWdlKTtcbn1cblxuZnVuY3Rpb24gcmVwb3J0KGxpbmU6IG51bWJlciwgd2hlcmU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKSB7XG4gIGNvbnNvbGUuZXJyb3IoYFtMaW5lICR7bGluZX1dIEVycm9yJHt3aGVyZX06ICR7bWVzc2FnZX1gKTtcbiAgaGFkRXJyb3IgPSB0cnVlO1xufVxuXG5tYWluKERlbm8uYXJncyk7XG4iXX0=